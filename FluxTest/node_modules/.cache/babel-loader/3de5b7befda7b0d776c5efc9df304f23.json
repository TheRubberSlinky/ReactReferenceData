{"ast":null,"code":"var _jsxFileName = \"E:\\\\TRISTAN\\\\Repos\\\\ReactReferenceData\\\\FluxTest\\\\src\\\\components\\\\Tree\\\\calls.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Tree, Menu, Dropdown, Spin, Layout, Input } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport \"antd/dist/antd.css\";\nimport { UserOutlined, HomeOutlined } from \"@ant-design/icons\"; //async function to search the tree\n\nexport async function treeSearch(url, e) {\n  if (e != \"\") {\n    const url = \"\".concat(url).concat(e);\n    let obj = [];\n    const response = await fetch(url, {\n      method: \"GET\"\n    });\n    const json = await response.json();\n    json.map(Main => {\n      obj.push({\n        title: Main.data[2].value,\n        key: Main.data[1].value,\n        icon: Main.data[3].value === \"0\" ? React.createElement(HomeOutlined, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 20\n          },\n          __self: this\n        }) : React.createElement(UserOutlined, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 20\n          },\n          __self: this\n        }),\n        isLeaf: Main.data[3].value === \"0\" ? false : true,\n        isLoading: false\n      });\n    });\n    return obj;\n  } else {\n    return [];\n  }\n}\nexport async function GetChildNodes(callUrl, ParentKey) {\n  const url = \"\".concat(callUrl).concat(ParentKey);\n  let obj = [];\n  const response = await fetch(url, {\n    method: \"GET\"\n  });\n  const json = await response.json();\n  json.map(Main => {\n    // obj.push({\n    //   title: Main.name,\n    //   key: Main.id,\n    //   //icon: <HomeOutlined />, //find out how the response works to see fi it is a branch or employee\n    //   isLeaf: false, //find out ow the response works to see if it is a branch or employee\n    // });\n    obj.push({\n      title: Main.data[2].value,\n      key: Main.data[1].value,\n      icon: Main.data[3].value === \"0\" ? React.createElement(HomeOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }) : React.createElement(UserOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }),\n      isLeaf: Main.data[3].value === \"0\" ? false : true\n    });\n  });\n  return obj;\n}\nexport async function UpdateCall(EmployeegetURL, employeeputURL, branchGetURL, branchPutURL, node, dragNode) {\n  const newBranch = node.key;\n\n  if (dragNode.isLeaf) {\n    let url = \"\".concat(EmployeegetURL).concat(dragNode.key);\n    let Employee = [];\n    let response = await fetch(url, {\n      method: \"GET\"\n    });\n    let json = await response.json();\n    json.map(Main => {\n      Employee.push({\n        empId: Main.id,\n        empIsActive: Main.isActive,\n        empBranchId: newBranch,\n        empChannelId: Main.channel.id,\n        empEmail: Main.empEmail,\n        empFirstName: Main.firstName,\n        empLastName: Main.lastName,\n        empBankerRoleId: Main.bankerRole.id,\n        empStaffNo: Main.staffNo\n      });\n    });\n    url = \"\".concat(employeeputURL).concat(dragNode.key); //create a body to put the info in\n\n    response = await fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(Employee)\n    });\n    json = await response.json(); //TODO: finish off this response depending on the result\n  } else {\n    let url = \"\".concat(branchGetURL).concat(dragNode.key);\n    let Branch = [];\n    let response = await fetch(url, {\n      method: \"GET\"\n    });\n    let json = await response.json();\n    json.map(Main => {\n      Branch.push({\n        Id: Main.id,\n        BranchCode: Main.branchCode,\n        BranchName: Main.branchName,\n        BranchCategoryId: Main.branchCategory.id,\n        ChannelId: Main.channel.id,\n        CanReceiveSale: Main.CanReceiveSale,\n        ParentBranchId: newBranch,\n        //or null\n        RegionId: Main.region.id,\n        //or null\n        IsActive: Main.isActive,\n        IsPostBox: Main.isPostBox,\n        OldCode: Main.oldCode //or null\n\n      });\n    });\n    url = \"\".concat(branchPutURL).concat(dragNode.key); //make a body of the previous object\n\n    response = await fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(Branch)\n    });\n    json = await response.json(); //TODO: complete this code\n  }\n}","map":{"version":3,"sources":["E:\\TRISTAN\\Repos\\ReactReferenceData\\FluxTest\\src\\components\\Tree\\calls.js"],"names":["React","useEffect","useState","Tree","Menu","Dropdown","Spin","Layout","Input","PropTypes","UserOutlined","HomeOutlined","treeSearch","url","e","obj","response","fetch","method","json","map","Main","push","title","data","value","key","icon","isLeaf","isLoading","GetChildNodes","callUrl","ParentKey","UpdateCall","EmployeegetURL","employeeputURL","branchGetURL","branchPutURL","node","dragNode","newBranch","Employee","empId","id","empIsActive","isActive","empBranchId","empChannelId","channel","empEmail","empFirstName","firstName","empLastName","lastName","empBankerRoleId","bankerRole","empStaffNo","staffNo","body","JSON","stringify","Branch","Id","BranchCode","branchCode","BranchName","branchName","BranchCategoryId","branchCategory","ChannelId","CanReceiveSale","ParentBranchId","RegionId","region","IsActive","IsPostBox","isPostBox","OldCode","oldCode"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Tree, Menu, Dropdown, Spin, Layout, Input } from \"antd\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"antd/dist/antd.css\";\r\nimport { UserOutlined, HomeOutlined } from \"@ant-design/icons\";\r\n\r\n//async function to search the tree\r\nexport async function treeSearch(url, e) {\r\n  if (e != \"\") {\r\n    const url = `${url}${e}`;\r\n    let obj = [];\r\n    const response = await fetch(url, {\r\n      method: \"GET\",\r\n    });\r\n    const json = await response.json();\r\n    json.map((Main) => {\r\n      obj.push({\r\n        title: Main.data[2].value,\r\n        key: Main.data[1].value,\r\n        icon: Main.data[3].value === \"0\" ? <HomeOutlined /> : <UserOutlined />,\r\n        isLeaf: Main.data[3].value === \"0\" ? false : true,\r\n        isLoading: false,\r\n      });\r\n    });\r\n    return obj;\r\n  } else {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function GetChildNodes(callUrl, ParentKey) {\r\n  const url = `${callUrl}${ParentKey}`;\r\n  let obj = [];\r\n  const response = await fetch(url, {\r\n    method: \"GET\",\r\n  });\r\n  const json = await response.json();\r\n  json.map((Main) => {\r\n    // obj.push({\r\n    //   title: Main.name,\r\n    //   key: Main.id,\r\n    //   //icon: <HomeOutlined />, //find out how the response works to see fi it is a branch or employee\r\n    //   isLeaf: false, //find out ow the response works to see if it is a branch or employee\r\n    // });\r\n    obj.push({\r\n      title: Main.data[2].value,\r\n      key: Main.data[1].value,\r\n      icon: Main.data[3].value === \"0\" ? <HomeOutlined /> : <UserOutlined />,\r\n      isLeaf: Main.data[3].value === \"0\" ? false : true,\r\n    });\r\n  });\r\n  return obj;\r\n}\r\n\r\nexport async function UpdateCall(\r\n  EmployeegetURL,\r\n  employeeputURL,\r\n  branchGetURL,\r\n  branchPutURL,\r\n  node,\r\n  dragNode\r\n) {\r\n  const newBranch = node.key;\r\n  if (dragNode.isLeaf) {\r\n    let url = `${EmployeegetURL}${dragNode.key}`;\r\n    let Employee = [];\r\n    let response = await fetch(url, {\r\n      method: \"GET\",\r\n    });\r\n    let json = await response.json();\r\n    json.map((Main) => {\r\n      Employee.push({\r\n        empId: Main.id,\r\n        empIsActive: Main.isActive,\r\n        empBranchId: newBranch,\r\n        empChannelId: Main.channel.id,\r\n        empEmail: Main.empEmail,\r\n        empFirstName: Main.firstName,\r\n        empLastName: Main.lastName,\r\n        empBankerRoleId: Main.bankerRole.id,\r\n        empStaffNo: Main.staffNo,\r\n      });\r\n    });\r\n\r\n    url = `${employeeputURL}${dragNode.key}`;\r\n    //create a body to put the info in\r\n    response = await fetch(url, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(Employee),\r\n    });\r\n    json = await response.json();\r\n    //TODO: finish off this response depending on the result\r\n  } else {\r\n    let url = `${branchGetURL}${dragNode.key}`;\r\n    let Branch = [];\r\n    let response = await fetch(url, {\r\n      method: \"GET\",\r\n    });\r\n    let json = await response.json();\r\n    json.map((Main) => {\r\n      Branch.push({\r\n        Id: Main.id,\r\n        BranchCode: Main.branchCode,\r\n        BranchName: Main.branchName,\r\n        BranchCategoryId: Main.branchCategory.id,\r\n        ChannelId: Main.channel.id,\r\n        CanReceiveSale: Main.CanReceiveSale,\r\n        ParentBranchId: newBranch, //or null\r\n        RegionId: Main.region.id, //or null\r\n        IsActive: Main.isActive,\r\n        IsPostBox: Main.isPostBox,\r\n        OldCode: Main.oldCode, //or null\r\n      });\r\n    });\r\n\r\n    url = `${branchPutURL}${dragNode.key}`;\r\n    //make a body of the previous object\r\n    response = await fetch(url, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(Branch),\r\n    });\r\n    json = await response.json();\r\n\r\n    //TODO: complete this code\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}