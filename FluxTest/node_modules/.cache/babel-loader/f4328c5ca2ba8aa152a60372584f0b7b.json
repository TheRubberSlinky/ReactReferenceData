{"ast":null,"code":"import _slicedToArray from \"C:\\\\TRISTAN\\\\Repos\\\\React-Reference-Data\\\\FluxTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:\\\\TRISTAN\\\\Repos\\\\React-Reference-Data\\\\FluxTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\TRISTAN\\\\Repos\\\\React-Reference-Data\\\\FluxTest\\\\src\\\\components\\\\AntTree.js\";\nimport React, { useState, Fragment } from \"react\";\nimport { Tree, Button, Popover, Form } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport \"antd/dist/antd.css\";\nimport { GetTreeData, GetTreeChildren } from \"./MockData\";\nimport axios from \"axios\"; //import { onRightClick } from \"./popup\";\n\nfunction updateTreeData(list, key, children) {\n  return list.map(node => {\n    if (node.key === key) {\n      return _objectSpread({}, node, {\n        children\n      });\n    }\n\n    if (node.children) {\n      return _objectSpread({}, node, {\n        children: updateTreeData(node.children, key, children)\n      });\n    }\n\n    return node;\n  });\n}\n\nfunction GetChildNodes(ParentKey) {\n  let children = GetTreeChildren(ParentKey);\n  return children;\n}\n\nexport function Demo(props) {\n  const url = \"https://localhost:5001/api/trees\";\n\n  const _useState = useState(GetData()),\n        _useState2 = _slicedToArray(_useState, 2),\n        treeData = _useState2[0],\n        setTreeData = _useState2[1];\n\n  const GetData = () => {\n    let obj = [];\n    axios.get(url).then(response => {\n      console.log(response);\n      response.data.map(Main => {\n        obj.push({\n          title: Main.data[0].value,\n          key: Main.data[1].value,\n          isLeaf: Main.data[2].value\n        });\n      }); //return baseTree;\n      //{ title: \"Branch1\", key: \"1\", isLeaf: false },\n      // [{\"key\":\"1\",\"data\":[{\"key\":\"title\",\"value\":\"Roodepoort\"},{\"key\":\"key\",\"value\":\"1\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"2\",\"data\":[{\"key\":\"title\",\"value\":\"Krugersdorp\"},{\"key\":\"key\",\"value\":\"2\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"4\",\"data\":[{\"key\":\"title\",\"value\":\"Fairlands\"},{\"key\":\"key\",\"value\":\"4\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"5\",\"data\":[{\"key\":\"title\",\"value\":\"Fourways\"},{\"key\":\"key\",\"value\":\"5\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]}]\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const layout = {\n    labelCol: {\n      span: 8\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  const tailLayout = {\n    wrapperCol: {\n      offset: 8,\n      span: 16\n    }\n  };\n\n  function onLoadData({\n    key,\n    children\n  }) {\n    return new Promise(resolve => {\n      if (children) {\n        resolve();\n        return;\n      }\n\n      setTreeData(origin => updateTreeData(origin, key, GetChildNodes(key)));\n      resolve();\n    });\n  } // const onSelect = (selectedKeys, otherValue) => {\n  //   debugger;\n  //   console.log(selectedKeys);\n  //   console.log(otherValue);\n  // };\n\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Tree, Object.assign({}, layout, {\n    style: {\n      height: \"auto\",\n      minHeight: \"570px\"\n    },\n    loadData: onLoadData,\n    onSelect: props.mySelect,\n    treeData: treeData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"button\",\n    onClick: () => props.myClick(\"Branch\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Add new Branch\"), React.createElement(Button, {\n    type: \"button\",\n    onClick: () => props.myClick(\"Employee\"),\n    value: \"Employee\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Add new Employee\")));\n} //TODO: move the keys away from a delimited string\n//      add popup instead of buttons to add\n\nDemo.propTypes = {\n  mySelect: PropTypes.func.isRequired,\n  myClick: PropTypes.func.isRequired\n};\nexport default Demo;","map":{"version":3,"sources":["C:\\TRISTAN\\Repos\\React-Reference-Data\\FluxTest\\src\\components\\AntTree.js"],"names":["React","useState","Fragment","Tree","Button","Popover","Form","PropTypes","GetTreeData","GetTreeChildren","axios","updateTreeData","list","key","children","map","node","GetChildNodes","ParentKey","Demo","props","url","GetData","treeData","setTreeData","obj","get","then","response","console","log","data","Main","push","title","value","isLeaf","catch","error","layout","labelCol","span","wrapperCol","tailLayout","offset","onLoadData","Promise","resolve","origin","height","minHeight","mySelect","myClick","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from \"react\";\r\nimport { Tree, Button, Popover, Form } from \"antd\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"antd/dist/antd.css\";\r\nimport { GetTreeData, GetTreeChildren } from \"./MockData\";\r\nimport axios from \"axios\";\r\n//import { onRightClick } from \"./popup\";\r\n\r\nfunction updateTreeData(list, key, children) {\r\n  return list.map(node => {\r\n    if (node.key === key) {\r\n      return { ...node, children };\r\n    }\r\n    if (node.children) {\r\n      return {\r\n        ...node,\r\n        children: updateTreeData(node.children, key, children)\r\n      };\r\n    }\r\n\r\n    return node;\r\n  });\r\n}\r\nfunction GetChildNodes(ParentKey) {\r\n  let children = GetTreeChildren(ParentKey);\r\n  return children;\r\n}\r\n\r\nexport function Demo(props) {\r\n  const url = `https://localhost:5001/api/trees`;\r\n  const [treeData, setTreeData] = useState(GetData());\r\n\r\n  const GetData = () => {\r\n    let obj = [];\r\n    axios\r\n      .get(url)\r\n      .then(response => {\r\n        console.log(response);\r\n        response.data.map(Main => {\r\n          obj.push({\r\n            title: Main.data[0].value,\r\n            key: Main.data[1].value,\r\n            isLeaf: Main.data[2].value\r\n          });\r\n        });\r\n        //return baseTree;\r\n        //{ title: \"Branch1\", key: \"1\", isLeaf: false },\r\n        // [{\"key\":\"1\",\"data\":[{\"key\":\"title\",\"value\":\"Roodepoort\"},{\"key\":\"key\",\"value\":\"1\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"2\",\"data\":[{\"key\":\"title\",\"value\":\"Krugersdorp\"},{\"key\":\"key\",\"value\":\"2\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"4\",\"data\":[{\"key\":\"title\",\"value\":\"Fairlands\"},{\"key\":\"key\",\"value\":\"4\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]},{\"key\":\"5\",\"data\":[{\"key\":\"title\",\"value\":\"Fourways\"},{\"key\":\"key\",\"value\":\"5\"},{\"key\":\"isLeaf\",\"value\":\"0\"}]}]\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  const layout = {\r\n    labelCol: {\r\n      span: 8\r\n    },\r\n    wrapperCol: {\r\n      span: 16\r\n    }\r\n  };\r\n  const tailLayout = {\r\n    wrapperCol: {\r\n      offset: 8,\r\n      span: 16\r\n    }\r\n  };\r\n  function onLoadData({ key, children }) {\r\n    return new Promise(resolve => {\r\n      if (children) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      setTreeData(origin => updateTreeData(origin, key, GetChildNodes(key)));\r\n      resolve();\r\n    });\r\n  }\r\n\r\n  // const onSelect = (selectedKeys, otherValue) => {\r\n  //   debugger;\r\n  //   console.log(selectedKeys);\r\n  //   console.log(otherValue);\r\n  // };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <Popover\r\n        content={<a onClick={hide}>Close</a>}\r\n        title=\"Title\"\r\n        trigger=\"click\"\r\n        visible={Visible}\r\n        onVisibleChange={handleVisibleChange}\r\n      ></Popover> */}\r\n      <Tree\r\n        {...layout}\r\n        style={{ height: \"auto\", minHeight: \"570px\" }}\r\n        loadData={onLoadData}\r\n        onSelect={props.mySelect}\r\n        treeData={treeData}\r\n      />\r\n      <Form.Item>\r\n        <Button type=\"button\" onClick={() => props.myClick(\"Branch\")}>\r\n          Add new Branch\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          onClick={() => props.myClick(\"Employee\")}\r\n          value=\"Employee\"\r\n        >\r\n          Add new Employee\r\n        </Button>\r\n      </Form.Item>\r\n    </Fragment>\r\n  );\r\n}\r\n//TODO: move the keys away from a delimited string\r\n//      add popup instead of buttons to add\r\nDemo.propTypes = {\r\n  mySelect: PropTypes.func.isRequired,\r\n  myClick: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Demo;\r\n"]},"metadata":{},"sourceType":"module"}